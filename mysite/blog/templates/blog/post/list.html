{% extends "blog/base.html" %}
{% load blog_tags %}
{% block title %}My Blog{% endblock %}
{% block content %}
<h1>My Blog</h1>
{% if tag %}
<h2>Posts tagged with "{{ tag.name }}"</h2>
{% endif %}
{% for post in posts %}
<h2>
    <a href="{{ post.get_absolute_url }}">
        <!--передаем необходимый пара-
        метр post.id, чтобы сформировать URL-адрес для каждого поста.
        Мы используем blog:post_detail, чтобы ссылаться на URL-адрес-->
        <!--post_detail в именном пространстве blog.-->
        {{ post.title }}
    </a>
</h2>
<p class="tags">Tags: {% for tag in post.tags.all %}
    <a href="{% url 'blog:post_list_by_tag' tag.slug %}">
        <!--        В приведенном выше исходном коде прокручиваются в цикле все теги-->
        <!--поста, отображающие конкретно-прикладную ссылку на URL-адрес, чтобы-->
        <!--фильтровать посты по этому тегу. URL-адрес формируется с по мощью тега-->
        <!-- url "blog:post_list_by_tag" tag.slug , используя имя URL-адреса и тег-->
        <!--slug в качестве его параметра. Теги отделяются запятыми.-->
        {{ tag.name }}
    </a>
    {% if not forloop.last %}, {% endif %}
    {% endfor %}</p>
<p class="date">
    Published {{ post.publish }} by {{ post.author }}
</p>
{{ post.body|markdown|truncatewords_html:30 }}
<!--В теле поста применяются два шаблонных фильтра: truncatewords усека- -->
<!--ет значение до указанного числа слов, а linebreaks конвертирует результат-->
<!--в разрывы строк в формате HTML.-->
{% endfor %}
{% include "pagination.html" with page=posts %}
<!--Шаблонный тег include % загружает данный шаблон и прорисовы- -->
<!--вает его с использованием текущего контекста шаблона. Ключевое слово-->
<!--with используется для того, чтобы передавать дополнительные контекстные-->
<!--переменные в шаблон. Для прорисовки в шаблоне постраничной разбивки-->
<!--используется переменная page, при этом объект Page, который мы передаем-->
<!--из представления в шаблон, называется posts. Мы используем выражение-->
<!--with page=posts, чтобы передавать переменную, ожидаемую шаблоном по- -->
<!--страничной разбивки. Описанному методу можно следовать для применения-->
<!--шаблона постраничной разбивки для любого типа объекта-->
{% endblock %}